(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[467],{2180:function(e,t,a){Promise.resolve().then(a.bind(a,3388))},6941:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(7437);function r(e){let{children:t,className:a="",loading:r=!1,...n}=e;return(0,s.jsxs)("button",{className:"btn-primary inline-flex items-center justify-center min-h-[44px] ".concat(a),disabled:r||n.disabled,...n,children:[r&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),t]})}},9382:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(7437);function r(e){let{label:t,error:a,className:r="",...n}=e;return(0,s.jsxs)("label",{className:"block w-full",children:[t&&(0,s.jsx)("span",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,s.jsx)("input",{className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary ".concat(r),...n}),a&&(0,s.jsx)("span",{className:"text-sm text-danger mt-1 block",children:a})]})}},3388:function(e,t,a){"use strict";a.d(t,{default:function(){return l}});var s=a(7437),r=a(2265),n=a(9382),i=a(6941);function l(e){let{initial:t={},onSaved:a}=e,[l,o]=(0,r.useState)({titulo:"",descripcion:"",precio:0,categoria:"utiles",stock:0,disponible:!0,imagenes:[],...t}),[c,u]=(0,r.useState)(!1),[d,m]=(0,r.useState)("");async function p(e){let t=new FormData;t.append("file",e);let a=await fetch("/api/upload",{method:"POST",body:t}),s=await a.json();if(!a.ok)throw Error(s.error||"Error al subir");return s.url}async function x(e){e.preventDefault(),u(!0),m("");try{let e={...l,precio:Number(l.precio),stock:Number(l.stock)},s=t._id?"/api/productos/".concat(t._id):"/api/productos",r=t._id?"PUT":"POST",n=await fetch(s,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await n.json();if(!n.ok)throw Error(i.error||"Error");null==a||a(i)}catch(e){m(e.message)}finally{u(!1)}}return(0,s.jsxs)("form",{onSubmit:x,className:"space-y-3",children:[(0,s.jsx)(n.Z,{label:"T\xedtulo*",value:l.titulo,onChange:e=>o({...l,titulo:e.target.value})}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n*"}),(0,s.jsx)("textarea",{className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary",rows:4,value:l.descripcion,onChange:e=>o({...l,descripcion:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsx)(n.Z,{label:"Precio*",type:"number",min:"0",step:"0.1",value:l.precio,onChange:e=>o({...l,precio:e.target.value})}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categor\xeda*"}),(0,s.jsxs)("select",{className:"w-full rounded-lg border border-gray-300 px-3 py-2",value:l.categoria,onChange:e=>o({...l,categoria:e.target.value}),children:[(0,s.jsx)("option",{value:"utiles",children:"\xdatiles"}),(0,s.jsx)("option",{value:"comida",children:"Comida"}),(0,s.jsx)("option",{value:"tecnologia",children:"Tecnolog\xeda"}),(0,s.jsx)("option",{value:"ropa",children:"Ropa"}),(0,s.jsx)("option",{value:"otros",children:"Otros"})]})]}),(0,s.jsx)(n.Z,{label:"Stock*",type:"number",min:"0",value:l.stock,onChange:e=>o({...l,stock:e.target.value})}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:l.disponible,onChange:e=>o({...l,disponible:e.target.checked})}),"Disponible"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Im\xe1genes (1-3)"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a)try{let e=await p(a);o(t=>({...t,imagenes:[...t.imagenes||[],e].slice(0,3)}))}catch(e){m(e.message)}}}),(0,s.jsx)("div",{className:"flex gap-2 mt-2",children:(l.imagenes||[]).map((e,t)=>(0,s.jsx)("img",{src:e,alt:"img",className:"w-16 h-16 object-cover rounded"},t))})]}),d&&(0,s.jsx)("p",{className:"text-danger text-sm",children:d}),(0,s.jsx)(i.Z,{loading:c,type:"submit",children:"Guardar"})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=2180)}),_N_E=e.O()}]);