(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[855],{6190:function(e,s,t){Promise.resolve().then(t.bind(t,3025))},3025:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(7437),d=t(7086);function l(e){let{items:s=[],onMark:t}=e;return(0,a.jsx)("div",{className:"overflow-x-auto bg-white rounded-xl border",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left text-sm text-gray-600",children:[(0,a.jsx)("th",{className:"p-3",children:"Fecha"}),(0,a.jsx)("th",{className:"p-3",children:"Comprador"}),(0,a.jsx)("th",{className:"p-3",children:"Contacto"}),(0,a.jsx)("th",{className:"p-3",children:"Productos"}),(0,a.jsx)("th",{className:"p-3",children:"Entrega"}),(0,a.jsx)("th",{className:"p-3",children:"Total"}),(0,a.jsx)("th",{className:"p-3",children:"Estado"}),(0,a.jsx)("th",{className:"p-3",children:"Acci\xf3n"})]})}),(0,a.jsx)("tbody",{children:s.map(e=>{var s,d,l,n,c,o;return(0,a.jsxs)("tr",{className:"border-t align-top",children:[(0,a.jsx)("td",{className:"p-3 text-sm",children:new Date(e.fecha_pedido).toLocaleString()}),(0,a.jsx)("td",{className:"p-3 text-sm",children:null===(s=e.comprador)||void 0===s?void 0:s.nombre}),(0,a.jsxs)("td",{className:"p-3 text-sm",children:[(0,a.jsx)("a",{href:"tel:".concat(null===(d=e.comprador)||void 0===d?void 0:d.telefono),className:"text-primary",children:null===(l=e.comprador)||void 0===l?void 0:l.telefono}),(null===(n=e.comprador)||void 0===n?void 0:n.email)&&(0,a.jsx)("div",{className:"text-gray-600",children:e.comprador.email})]}),(0,a.jsxs)("td",{className:"p-3 text-sm",children:[(0,a.jsx)("ul",{className:"list-disc pl-4",children:e.productos.map((e,s)=>(0,a.jsxs)("li",{children:[e.titulo," x ",e.cantidad]},s))}),(null===(c=e.comprador)||void 0===c?void 0:c.comentarios)&&(0,a.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:['"',e.comprador.comentarios,'"']})]}),(0,a.jsx)("td",{className:"p-3 text-sm",children:null===(o=e.comprador)||void 0===o?void 0:o.punto_entrega}),(0,a.jsxs)("td",{className:"p-3 font-semibold",children:["S/ ",e.total.toFixed(2)]}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("pendiente"===e.estado?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:e.estado})}),(0,a.jsx)("td",{className:"p-3",children:"pendiente"===e.estado&&(0,a.jsx)("button",{className:"text-success",onClick:()=>null==t?void 0:t(e,"entregado"),children:"Marcar entregado"})})]},e._id)})})]})})}let n=e=>fetch(e).then(e=>e.json());function c(){let{data:e,mutate:s}=(0,d.ZP)("/api/vendedor/pedidos",n),t=(null==e?void 0:e.items)||[];async function c(e,t){await fetch("/api/vendedor/pedidos",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e._id,estado:t})}),s()}return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Pedidos recibidos"}),(0,a.jsx)(l,{items:t,onMark:c})]})}}},function(e){e.O(0,[86,971,117,744],function(){return e(e.s=6190)}),_N_E=e.O()}]);