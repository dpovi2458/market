exports.id=487,exports.ids=[487],exports.modules={87432:(e,t,r)=>{Promise.resolve().then(r.bind(r,22708)),Promise.resolve().then(r.bind(r,88313))},25352:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},35303:()=>{},22708:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var a=r(10326),s=r(90434),n=r(35047),i=r(88313);function l({count:e=0}){return(0,a.jsxs)("div",{className:"relative",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.28M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})}),e>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-danger text-white text-xs rounded-full px-1.5 py-0.5",children:e})]})}var o=r(17577);function c(){var e;let t=(0,n.useRouter)(),r=(0,n.useSearchParams)(),s=r.get("q")||"",i=(e=e=>{let a=new URLSearchParams(r.toString());e?a.set("q",e):a.delete("q"),t.push(`/?${a.toString()}`)},(0,o.useMemo)(()=>{let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>e(...r),300)}},[e,300]));return a.jsx("input",{defaultValue:s,onChange:e=>i(e.target.value),placeholder:"Buscar productos...",className:"w-full max-w-md rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary"})}var d=r(77626),m=r.n(d);function u({open:e,onClose:t,title:r,children:s}){return e?(0,a.jsxs)("div",{className:"jsx-788cddd28b8889bb fixed inset-0 z-50",children:[a.jsx("div",{onClick:t,className:"jsx-788cddd28b8889bb absolute inset-0 bg-black/40"}),(0,a.jsxs)("div",{className:"jsx-788cddd28b8889bb absolute right-0 top-0 h-full w-full sm:w-[420px] bg-white shadow-xl p-4 overflow-y-auto animate-[slideIn_.2s_ease]",children:[r&&a.jsx("h2",{className:"jsx-788cddd28b8889bb text-lg font-semibold mb-3",children:r}),s]}),a.jsx(m(),{id:"788cddd28b8889bb",children:"@-webkit-keyframes slideIn{from{-webkit-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slideIn{from{-moz-transform:translatex(100%);transform:translatex(100%)}to{-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slideIn{from{-o-transform:translatex(100%);transform:translatex(100%)}to{-o-transform:translatex(0);transform:translatex(0)}}@keyframes slideIn{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}"})]}):null}var x=r(87434);function p(){let{items:e,open:t,setOpen:r}=(0,i.A)(),d=(0,n.usePathname)(),m=(0,n.useRouter)(),x=d?.startsWith("/vendedor");return(0,a.jsxs)("header",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"container flex items-center justify-between py-3 gap-3",children:[a.jsx(s.default,{href:"/",className:"text-primary font-semibold",children:"Market Facultad"}),!x&&a.jsx("div",{className:"hidden md:block flex-1 text-center",children:a.jsx(o.Suspense,{fallback:a.jsx("div",{}),children:a.jsx(c,{})})}),(0,a.jsxs)("nav",{className:"flex items-center gap-3",children:[!x&&a.jsx("button",{className:"relative",onClick:()=>r(!0),"aria-label":"Abrir carrito",children:a.jsx(l,{count:e.reduce((e,t)=>e+t.cantidad,0)})}),a.jsx(s.default,{href:"/vendedor/login",className:"text-sm text-gray-600 hover:text-primary",children:"Vendedor"})]})]}),!x&&a.jsx("div",{className:"md:hidden container pb-3",children:a.jsx(o.Suspense,{fallback:a.jsx("div",{}),children:a.jsx(c,{})})}),a.jsx(u,{open:!x&&t,onClose:()=>r(!1),title:"Tu carrito",children:a.jsx(h,{onClose:()=>r(!1),onGoCart:()=>{r(!1),m.push("/carrito")}})})]})}function h({onClose:e,onGoCart:t}){let{items:r,updateCantidad:s,removeItem:n}=(0,i.A)(),l=r.reduce((e,t)=>e+t.precio*t.cantidad,0);return(0,a.jsxs)("div",{className:"space-y-4",children:[0===r.length&&a.jsx("p",{className:"text-sm text-gray-600",children:"Tu carrito est\xe1 vac\xedo."}),a.jsx("ul",{className:"space-y-3",children:r.map(e=>(0,a.jsxs)("li",{className:"flex items-center gap-3",children:[e.imagen&&a.jsx("img",{src:e.imagen,alt:e.titulo,className:"w-16 h-16 object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium line-clamp-1",children:e.titulo}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["S/ ",e.precio.toFixed(2)]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>s(e.producto_id,Math.max(1,e.cantidad-1)),children:"-"}),a.jsx("span",{children:e.cantidad}),a.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>s(e.producto_id,Math.min(e.stock??99,e.cantidad+1)),children:"+"}),a.jsx("button",{className:"ml-3 text-danger text-sm",onClick:()=>n(e.producto_id),children:"Eliminar"})]})]})]},e.producto_id))}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Total:"}),(0,a.jsxs)("span",{className:"text-lg font-semibold",children:["S/ ",l.toFixed(2)]})]}),a.jsx(x.Z,{onClick:t,disabled:0===r.length,children:"Ir al carrito"})]})}},87434:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(10326);function s({children:e,className:t="",loading:r=!1,...s}){return(0,a.jsxs)("button",{className:`btn-primary inline-flex items-center justify-center min-h-[44px] ${t}`,disabled:r||s.disabled,...s,children:[r&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),e]})}},44627:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(10326);function s({label:e,error:t,className:r="",...s}){return(0,a.jsxs)("label",{className:"block w-full",children:[e&&a.jsx("span",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),a.jsx("input",{className:`w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary ${r}`,...s}),t&&a.jsx("span",{className:"text-sm text-danger mt-1 block",children:t})]})}},88189:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var a=r(10326),s=r(17577),n=r(44627),i=r(87434);function l({initial:e={},onSaved:t}){let[r,l]=(0,s.useState)({titulo:"",descripcion:"",precio:0,categoria:"utiles",stock:0,disponible:!0,imagenes:[],...e}),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)("");async function u(e){let t=new FormData;t.append("file",e);let r=await fetch("/api/upload",{method:"POST",body:t}),a=await r.json();if(!r.ok)throw Error(a.error||"Error al subir");return a.url}async function x(a){a.preventDefault(),c(!0),m("");try{let a={...r,precio:Number(r.precio),stock:Number(r.stock)},s=e._id?`/api/productos/${e._id}`:"/api/productos",n=e._id?"PUT":"POST",i=await fetch(s,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),l=await i.json();if(!i.ok)throw Error(l.error||"Error");t?.(l)}catch(e){m(e.message)}finally{c(!1)}}return(0,a.jsxs)("form",{onSubmit:x,className:"space-y-3",children:[a.jsx(n.Z,{label:"T\xedtulo*",value:r.titulo,onChange:e=>l({...r,titulo:e.target.value})}),(0,a.jsxs)("label",{className:"block",children:[a.jsx("span",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripci\xf3n*"}),a.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary",rows:4,value:r.descripcion,onChange:e=>l({...r,descripcion:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(n.Z,{label:"Precio*",type:"number",min:"0",step:"0.1",value:r.precio,onChange:e=>l({...r,precio:e.target.value})}),(0,a.jsxs)("label",{className:"block",children:[a.jsx("span",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categor\xeda*"}),(0,a.jsxs)("select",{className:"w-full rounded-lg border border-gray-300 px-3 py-2",value:r.categoria,onChange:e=>l({...r,categoria:e.target.value}),children:[a.jsx("option",{value:"utiles",children:"\xdatiles"}),a.jsx("option",{value:"comida",children:"Comida"}),a.jsx("option",{value:"tecnologia",children:"Tecnolog\xeda"}),a.jsx("option",{value:"ropa",children:"Ropa"}),a.jsx("option",{value:"otros",children:"Otros"})]})]}),a.jsx(n.Z,{label:"Stock*",type:"number",min:"0",value:r.stock,onChange:e=>l({...r,stock:e.target.value})}),(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:r.disponible,onChange:e=>l({...r,disponible:e.target.checked})}),"Disponible"]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Im\xe1genes (1-3)"}),a.jsx("input",{type:"file",accept:"image/*",onChange:async e=>{let t=e.target.files?.[0];if(t)try{let e=await u(t);l(t=>({...t,imagenes:[...t.imagenes||[],e].slice(0,3)}))}catch(e){m(e.message)}}}),a.jsx("div",{className:"flex gap-2 mt-2",children:(r.imagenes||[]).map((e,t)=>a.jsx("img",{src:e,alt:"img",className:"w-16 h-16 object-cover rounded"},t))})]}),d&&a.jsx("p",{className:"text-danger text-sm",children:d}),a.jsx(i.Z,{loading:o,type:"submit",children:"Guardar"})]})}},88313:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,CarritoProvider:()=>l});var a=r(10326),s=r(17577);let n=(0,s.createContext)();function i(e,t){switch(t.type){case"INIT":return t.payload||[];case"ADD":if(e.find(e=>e.producto_id===t.payload.producto_id))return e.map(e=>e.producto_id===t.payload.producto_id?{...e,cantidad:Math.min(e.stock??99,e.cantidad+t.payload.cantidad)}:e);return[...e,t.payload];case"UPDATE_QTY":return e.map(e=>e.producto_id===t.id?{...e,cantidad:t.cantidad}:e);case"REMOVE":return e.filter(e=>e.producto_id!==t.id);case"CLEAR":return[];default:return e}}function l({children:e}){let[t,r]=(0,s.useReducer)(i,[]),[l,o]=(0,s.useState)(!1),c=(0,s.useMemo)(()=>({items:t,open:l,setOpen:o,addItem:e=>r({type:"ADD",payload:e}),updateCantidad:(e,t)=>r({type:"UPDATE_QTY",id:e,cantidad:t}),removeItem:e=>r({type:"REMOVE",id:e}),clear:()=>r({type:"CLEAR"})}),[t,l]);return a.jsx(n.Provider,{value:c,children:e})}function o(){let e=(0,s.useContext)(n);if(!e)throw Error("useCarrito debe usarse dentro de CarritoProvider");return e}},60940:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>l});var a=r(19510);r(67272);var s=r(68570);let n=(0,s.createProxy)(String.raw`C:\Users\dpovi\Unimarket\marketplace-facultad\components\Navbar.js#default`),i=(0,s.createProxy)(String.raw`C:\Users\dpovi\Unimarket\marketplace-facultad\context\CarritoContext.js#CarritoProvider`);(0,s.createProxy)(String.raw`C:\Users\dpovi\Unimarket\marketplace-facultad\context\CarritoContext.js#useCarrito`);let l={title:"Marketplace Facultad Industrial",description:"Compra y venta entre estudiantes de Ingenier\xeda Industrial"};function o({children:e}){return a.jsx("html",{lang:"es",children:a.jsx("body",{children:(0,a.jsxs)(i,{children:[a.jsx(n,{}),a.jsx("main",{className:"container py-4",children:e})]})})})}},85901:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(19510);function s({children:e}){return a.jsx("div",{className:"container py-6",children:e})}},67272:()=>{}};