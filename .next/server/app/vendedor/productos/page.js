(()=>{var e={};e.id=878,e.ids=[878],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84917:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>l}),r(87951),r(85901),r(60940),r(35866);var a=r(23191),s=r(88716),n=r(37922),i=r.n(n),o=r(95231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let l=["",{children:["vendedor",{children:["productos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,87951)),"C:\\Users\\dpovi\\Unimarket\\marketplace-facultad\\app\\vendedor\\productos\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85901)),"C:\\Users\\dpovi\\Unimarket\\marketplace-facultad\\app\\vendedor\\layout.js"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,60940)),"C:\\Users\\dpovi\\Unimarket\\marketplace-facultad\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\dpovi\\Unimarket\\marketplace-facultad\\app\\vendedor\\productos\\page.js"],m="/vendedor/productos/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/vendedor/productos/page",pathname:"/vendedor/productos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},87432:(e,t,r)=>{Promise.resolve().then(r.bind(r,22708)),Promise.resolve().then(r.bind(r,88313))},980:(e,t,r)=>{Promise.resolve().then(r.bind(r,76583))},25352:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},35303:()=>{},76583:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(10326),s=r(58399);function n({items:e=[],onToggle:t,onDelete:r}){return a.jsx("div",{className:"overflow-x-auto bg-white rounded-xl border",children:(0,a.jsxs)("table",{className:"min-w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"text-left text-sm text-gray-600",children:[a.jsx("th",{className:"p-3",children:"Producto"}),a.jsx("th",{className:"p-3",children:"Precio"}),a.jsx("th",{className:"p-3",children:"Stock"}),a.jsx("th",{className:"p-3",children:"Estado"}),a.jsx("th",{className:"p-3",children:"Acciones"})]})}),a.jsx("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsxs)("td",{className:"p-3 flex items-center gap-2",children:[a.jsx("img",{src:e.imagenes?.[0]||"https://images.unsplash.com/photo-1519681393784-d120267933ba?w=200&q=60&auto=format&fit=crop",alt:"img",className:"w-12 h-12 object-cover rounded"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"font-medium",children:e.titulo}),a.jsx("div",{className:"text-xs text-gray-600",children:e.categoria})]})]}),(0,a.jsxs)("td",{className:"p-3",children:["S/ ",e.precio.toFixed(2)]}),a.jsx("td",{className:"p-3",children:e.stock}),a.jsx("td",{className:"p-3",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${e.disponible?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:e.disponible?"Disponible":"Agotado"})}),(0,a.jsxs)("td",{className:"p-3 space-x-2",children:[a.jsx("a",{href:`/vendedor/productos/editar/${e._id}`,className:"text-primary",children:"Editar"}),a.jsx("button",{className:"text-gray-700",onClick:()=>t?.(e),children:e.disponible?"Marcar Agotado":"Marcar Disponible"}),a.jsx("button",{className:"text-danger",onClick:()=>r?.(e),children:"Eliminar"})]})]},e._id))})]})})}let i=e=>fetch(e).then(e=>e.json());function o(){let{data:e,mutate:t}=(0,s.ZP)("/api/vendedor/productos",i),r=e?.items||[];async function o(e){await fetch(`/api/productos/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({disponible:!e.disponible})}),t()}async function d(e){confirm("\xbfEliminar producto?")&&(await fetch(`/api/productos/${e._id}`,{method:"DELETE"}),t())}return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Tus productos"}),a.jsx("a",{className:"btn-primary inline-block",href:"/vendedor/productos/nuevo",children:"Publicar nuevo"}),a.jsx(n,{items:r,onToggle:o,onDelete:d})]})}},22708:(e,t,r)=>{"use strict";r.d(t,{default:()=>p});var a=r(10326),s=r(90434),n=r(35047),i=r(88313);function o({count:e=0}){return(0,a.jsxs)("div",{className:"relative",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.28M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})}),e>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-danger text-white text-xs rounded-full px-1.5 py-0.5",children:e})]})}var d=r(17577);function l(){var e;let t=(0,n.useRouter)(),r=(0,n.useSearchParams)(),s=r.get("q")||"",i=(e=e=>{let a=new URLSearchParams(r.toString());e?a.set("q",e):a.delete("q"),t.push(`/?${a.toString()}`)},(0,d.useMemo)(()=>{let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>e(...r),300)}},[e,300]));return a.jsx("input",{defaultValue:s,onChange:e=>i(e.target.value),placeholder:"Buscar productos...",className:"w-full max-w-md rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary"})}var c=r(77626),m=r.n(c);function u({open:e,onClose:t,title:r,children:s}){return e?(0,a.jsxs)("div",{className:"jsx-788cddd28b8889bb fixed inset-0 z-50",children:[a.jsx("div",{onClick:t,className:"jsx-788cddd28b8889bb absolute inset-0 bg-black/40"}),(0,a.jsxs)("div",{className:"jsx-788cddd28b8889bb absolute right-0 top-0 h-full w-full sm:w-[420px] bg-white shadow-xl p-4 overflow-y-auto animate-[slideIn_.2s_ease]",children:[r&&a.jsx("h2",{className:"jsx-788cddd28b8889bb text-lg font-semibold mb-3",children:r}),s]}),a.jsx(m(),{id:"788cddd28b8889bb",children:"@-webkit-keyframes slideIn{from{-webkit-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slideIn{from{-moz-transform:translatex(100%);transform:translatex(100%)}to{-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slideIn{from{-o-transform:translatex(100%);transform:translatex(100%)}to{-o-transform:translatex(0);transform:translatex(0)}}@keyframes slideIn{from{-webkit-transform:translatex(100%);-moz-transform:translatex(100%);-o-transform:translatex(100%);transform:translatex(100%)}to{-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}"})]}):null}var x=r(87434);function p(){let{items:e,open:t,setOpen:r}=(0,i.A)(),c=(0,n.usePathname)(),m=(0,n.useRouter)(),x=c?.startsWith("/vendedor");return(0,a.jsxs)("header",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"container flex items-center justify-between py-3 gap-3",children:[a.jsx(s.default,{href:"/",className:"text-primary font-semibold",children:"Market Facultad"}),!x&&a.jsx("div",{className:"hidden md:block flex-1 text-center",children:a.jsx(d.Suspense,{fallback:a.jsx("div",{}),children:a.jsx(l,{})})}),(0,a.jsxs)("nav",{className:"flex items-center gap-3",children:[!x&&a.jsx("button",{className:"relative",onClick:()=>r(!0),"aria-label":"Abrir carrito",children:a.jsx(o,{count:e.reduce((e,t)=>e+t.cantidad,0)})}),a.jsx(s.default,{href:"/vendedor/login",className:"text-sm text-gray-600 hover:text-primary",children:"Vendedor"})]})]}),!x&&a.jsx("div",{className:"md:hidden container pb-3",children:a.jsx(d.Suspense,{fallback:a.jsx("div",{}),children:a.jsx(l,{})})}),a.jsx(u,{open:!x&&t,onClose:()=>r(!1),title:"Tu carrito",children:a.jsx(h,{onClose:()=>r(!1),onGoCart:()=>{r(!1),m.push("/carrito")}})})]})}function h({onClose:e,onGoCart:t}){let{items:r,updateCantidad:s,removeItem:n}=(0,i.A)(),o=r.reduce((e,t)=>e+t.precio*t.cantidad,0);return(0,a.jsxs)("div",{className:"space-y-4",children:[0===r.length&&a.jsx("p",{className:"text-sm text-gray-600",children:"Tu carrito est\xe1 vac\xedo."}),a.jsx("ul",{className:"space-y-3",children:r.map(e=>(0,a.jsxs)("li",{className:"flex items-center gap-3",children:[e.imagen&&a.jsx("img",{src:e.imagen,alt:e.titulo,className:"w-16 h-16 object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium line-clamp-1",children:e.titulo}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["S/ ",e.precio.toFixed(2)]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>s(e.producto_id,Math.max(1,e.cantidad-1)),children:"-"}),a.jsx("span",{children:e.cantidad}),a.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>s(e.producto_id,Math.min(e.stock??99,e.cantidad+1)),children:"+"}),a.jsx("button",{className:"ml-3 text-danger text-sm",onClick:()=>n(e.producto_id),children:"Eliminar"})]})]})]},e.producto_id))}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Total:"}),(0,a.jsxs)("span",{className:"text-lg font-semibold",children:["S/ ",o.toFixed(2)]})]}),a.jsx(x.Z,{onClick:t,disabled:0===r.length,children:"Ir al carrito"})]})}},87434:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(10326);function s({children:e,className:t="",loading:r=!1,...s}){return(0,a.jsxs)("button",{className:`btn-primary inline-flex items-center justify-center min-h-[44px] ${t}`,disabled:r||s.disabled,...s,children:[r&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),e]})}},88313:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,CarritoProvider:()=>o});var a=r(10326),s=r(17577);let n=(0,s.createContext)();function i(e,t){switch(t.type){case"INIT":return t.payload||[];case"ADD":if(e.find(e=>e.producto_id===t.payload.producto_id))return e.map(e=>e.producto_id===t.payload.producto_id?{...e,cantidad:Math.min(e.stock??99,e.cantidad+t.payload.cantidad)}:e);return[...e,t.payload];case"UPDATE_QTY":return e.map(e=>e.producto_id===t.id?{...e,cantidad:t.cantidad}:e);case"REMOVE":return e.filter(e=>e.producto_id!==t.id);case"CLEAR":return[];default:return e}}function o({children:e}){let[t,r]=(0,s.useReducer)(i,[]),[o,d]=(0,s.useState)(!1),l=(0,s.useMemo)(()=>({items:t,open:o,setOpen:d,addItem:e=>r({type:"ADD",payload:e}),updateCantidad:(e,t)=>r({type:"UPDATE_QTY",id:e,cantidad:t}),removeItem:e=>r({type:"REMOVE",id:e}),clear:()=>r({type:"CLEAR"})}),[t,o]);return a.jsx(n.Provider,{value:l,children:e})}function d(){let e=(0,s.useContext)(n);if(!e)throw Error("useCarrito debe usarse dentro de CarritoProvider");return e}},60940:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>o});var a=r(19510);r(67272);var s=r(68570);let n=(0,s.createProxy)(String.raw`C:\Users\dpovi\Unimarket\marketplace-facultad\components\Navbar.js#default`),i=(0,s.createProxy)(String.raw`C:\Users\dpovi\Unimarket\marketplace-facultad\context\CarritoContext.js#CarritoProvider`);(0,s.createProxy)(String.raw`C:\Users\dpovi\Unimarket\marketplace-facultad\context\CarritoContext.js#useCarrito`);let o={title:"Marketplace Facultad Industrial",description:"Compra y venta entre estudiantes de Ingenier\xeda Industrial"};function d({children:e}){return a.jsx("html",{lang:"es",children:a.jsx("body",{children:(0,a.jsxs)(i,{children:[a.jsx(n,{}),a.jsx("main",{className:"container py-4",children:e})]})})})}},85901:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(19510);function s({children:e}){return a.jsx("div",{className:"container py-6",children:e})}},87951:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`C:\Users\dpovi\Unimarket\marketplace-facultad\app\vendedor\productos\page.js#default`)},67272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,200,399],()=>r(84917));module.exports=a})();